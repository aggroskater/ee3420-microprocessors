#IFNDEF DELAY_INC
DELAY_INC EQU 1
#MSG "DELAY.INC REVISION 08/19/2010"
#MSG "COPYRIGHT 2010 WILLIAM STAPLETON"
#MSG "THIS FILE MAY BE FREELY DISTRIBUTED AS LONG AS IT REMAINS UNCHANGED AND FULLY CREDITED."

;COMMENT OUT THE FOLLOWING LINE TO INCLUDE THE FULL FILE IN THE LISTING
; NOLIST

;ALL DELAYS ARE BASED ON AN ASSUMED 24MHZ CLOCK ON DRAGON12-PLUS

_DELAY_1US	;CALL requires 7 cycles
	NOP	;10 NOP = 10 CYCLES
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	RTC	;7 CYCLES for total of 24 cycles

_DELAY_1US_3	;CALL requires 7 cycles
;	REPEAT 12
	NOP	;7 NOP = 7 CYCLES
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	RTC	;7 CYCLES for total of 21 cycles  add a dbne for 24 cycles

_DELAY_XUS;		;JSR TAKES 4 CYCLES
	PSHX		;2 cycles
_DELAY_XUS_1:
	CALL _DELAY_1US_3,LIBRARY_PAGE	;1us minus 3 cycles
	DBNE X,_DELAY_XUS_1	;3 cycles per loop
	PULX		;3 cycles
	RTC		;5 cycles



_DELAY_1MS	
	DELAY_BY_US #1000
	RTC

_DELAY_XMS
	PSHX
_DELAY_XMS_1:
	CALL _DELAY_1MS,LIBRARY_PAGE
	DBNE X,_DELAY_XMS_1
	PULX
	RTC


_DELAY_1S
	DELAY_BY_MS #1000
	RTC

_DELAY_XS
	PSHX
_DELAY_XS_1
	CALL _DELAY_1S,LIBRARY_PAGE
	DBNE X,_DELAY_XS_1
	PULX
	RTC	



;THE FOLLOWING LINE RESTORES LISTING FOR CODE OUTSIDE OF THIS LIBRARY
	LIST

#ENDIF ;DELAY_INC
