; vim: set filetype=asmhc12:

#INCLUDE ../HC12TOOLS.INC
;#INCLUDE ../KEYPAD_IO.INC
;#INCLUDE ../LCD_IO.INC

	ORG $1000

COUNTER	DS.B 1

	ORG $2000

MAIN:

	BSET PWME,BIT4	;ENABLE PWM CHANNEL 4 ; PP4 outputs waveform
	BSET PWMPOL,BIT4 ;CHANNEL 4 ACTIVE HIGH
	BCLR PWMCLK,BIT4 ;CHANNEL 4 CLOCK A
	MOVB #$06,PWMPRCLK ;PWM CLOCK A SCALE=64
	MOVB #75,PWMPER4 ;PWM CHANNEL 4 PERIOD = 200us
	MOVB #15,PWMDTY4 ;PWM CHANNEL 4 DUTY CYCLE
	; IS 15/75 CLOCKS = 20%

LOOP:

	BRA LOOP
